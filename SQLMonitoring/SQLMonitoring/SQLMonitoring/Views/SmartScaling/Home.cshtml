@model IEnumerable<SQLMonitoring.Model.Server>

@{
    ViewData["Title"] = "Pametno Skaliranje";
}


<link href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
<script src="//code.jquery.com/jquery-1.11.1.min.js"></script>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
<link href="~/css/site.css" rel="stylesheet" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.47.0/codemirror.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.47.0/codemirror.min.css">
<script src="~/js/sql.js"></script>

<script type="text/javascript">
    var db = "";
    var srv = "";

    function selectServer(srvName) {
        srv = srvName
    }

    function selectDb(dbName) {
        db = dbName;
    }

</script>

<div class="list-group" style="width:25%;margin-left:-25%;margin-top:4%;">
    <a asp-area="" asp-controller="Server" asp-action="Home" class="list-group-item"><i class="fa fa-database"></i> <span>&nbsp;&nbsp;&nbsp;Servers</span></a>
    <a asp-area="" asp-controller="Report" asp-action="Home" class="list-group-item"><i class="fa fa-sticky-note-o"></i> <span>&nbsp;&nbsp;&nbsp;Reports</span></a>
    <a asp-area="" asp-controller="Server" asp-action="Add" class="list-group-item"><i class="fa fa-server"></i> <span>&nbsp;&nbsp;&nbsp;Add Server</span></a>
    <a asp-area="" asp-controller="Query" asp-action="Edit" class="list-group-item"><i class="fa fa-table"></i> <span>&nbsp;&nbsp;&nbsp;Query Editor</span></a>
    <a asp-area="" asp-controller="SmartScaling" asp-action="Home" class="list-group-item" active><i class="fa fa-lightbulb-o"></i><span>&nbsp;&nbsp;&nbsp; Smart scaling</span></a>
    <a asp-area="" asp-controller="Home" asp-action="Logout" class="list-group-item"><i class="fa fa-sign-out"></i> <span>&nbsp;&nbsp;&nbsp;Sign Out</span></a>
</div>

<<div class="callout callout-warning" style="position:absolute;width:1500px;top:110px;left:500px;">
    <h4>Pametno skaliranje</h4>
    Pametno skaliranje je funkcionalnost koja sakuplja statistiku na nivou servera i pomaže klijentu da predvidi opterećenje servera, uoči vremenske šablone u opterećenju,<br />
    kao i glavna uska grla bazirano na istoriji statistike servera, pomažući u donošenju odluke o vertikalnom ili horizontalnom skaliranju.

    <br /><br />

    Da konfigurisete pametno skaliranje, potrebno je samo da pokrenete <a href="C:\SQLProjects\sql_monitoring\SQLMonitoring\SQLMonitoring\SQLMonitoring\wwwroot\SmartScaling.ps1" download> ovu skriptu </a>  na mašini na kojoj je instaliran SQL server, koja će periodično skupljati statistiku i upisivati rezultate <br />
    na server gde se mogu koristiti za dalju analizu.

    <br /><br />

    Da nastavite, molimo Vas da izaberete server sa liste da bi videli predikcije opterećenja, ili preuzmite skriptu sa linka i podesite pametno skaliranje za neki <br />
    od željenih servera.
</div>

@if (@ViewBag.SmartStatsErrorMessage != null && @ViewBag.SmartStatsErrorMessage != "")
{
    <div id="infomessage" class="alert alert-danger" role="alert" style="position:absolute;width:1400px;top:460px;left:500px;">
        @ViewBag.SmartStatsErrorMessage
    </div>
}

<div class="container" style="position:absolute;width:15%;left:120px;top:460px;">
    <div class="panel-group" id="accordion">
        @foreach (var item in Model)
        {
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h4 class="panel-title">
                        <a asp-controller="SmartScaling" asp-action="Check" asp-route-server="@item.ServerName">@item.ServerName</a>
                    </h4>
                </div>
            </div>
        }
    </div>
</div>
